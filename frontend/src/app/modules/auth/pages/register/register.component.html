<div class="register-container">
  <div class="register-card">
    <div class="logo-container">
      <img src="../../../../../assets/img/capgemini.png" alt="Capgemini Logo" class="logo">
    </div>
    <h2>Créer un compte sur Assistant IA SFD</h2>
    <p class="subtitle">Commencez avec votre compte gratuit</p>

    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="auth-form">
      <div class="form-group">
        <label for="email">Adresse email</label>
        <input 
          type="email" 
          id="email" 
          formControlName="email"
          placeholder="vous@exemple.com"
          [class.invalid]="form.get('email')?.invalid && form.get('email')?.touched">
        <div *ngIf="form.get('email')?.invalid && form.get('email')?.touched" class="error-message">
          <span *ngIf="form.get('email')?.errors?.['required']">L'email est requis</span>
          <span *ngIf="form.get('email')?.errors?.['email']">Veuillez entrer une adresse email valide</span>
        </div>
      </div>

      <div class="form-group">
        <label for="password">Mot de passe</label>
        <div class="password-input">
          <input 
            [type]="showPassword ? 'text' : 'password'" 
            id="password" 
            formControlName="password"
            placeholder="Votre mot de passe"
            [class.invalid]="form.get('password')?.invalid && form.get('password')?.touched">
          <button 
            type="button" 
            class="toggle-password"
            (click)="togglePasswordVisibility()">
            <i [ngClass]="showPassword ? 'fa fa-eye-slash' : 'fa fa-eye'"></i>
          </button>
        </div>
        <div *ngIf="form.get('password')?.invalid && form.get('password')?.touched" class="error-message">
          <span *ngIf="form.get('password')?.errors?.['required']">Le mot de passe est requis</span>
          <span *ngIf="form.get('password')?.errors?.['minlength']">Minimum 6 caractères</span>
        </div>
        <p class="password-hint">Utilisez au moins 6 caractères</p>
      </div>

      <div class="form-group">
        <label for="confirmPassword">Confirmez le mot de passe</label>
       <div class="password-input">
          <input 
            [type]="showConfirmPassword ? 'text' : 'password'" 
            id="confirmPassword" 
            formControlName="confirmPassword"
            placeholder="Confirmez votre mot de passe"
            [class.invalid]="form.get('confirmPassword')?.invalid && form.get('confirmPassword')?.touched">
          <button 
            type="button" 
            class="toggle-password"
            (click)="toggleConfirmPasswordVisibility()">
            <i [ngClass]="showConfirmPassword ? 'fa fa-eye-slash' : 'fa fa-eye'"></i>
          </button>
        </div>

        <div *ngIf="form.get('confirmPassword')?.invalid && form.get('confirmPassword')?.touched" class="error-message">
          <span *ngIf="form.get('confirmPassword')?.errors?.['required']">Veuillez confirmer votre mot de passe</span>
          <span *ngIf="form.errors?.['mismatch']">Les mots de passe ne correspondent pas</span>
        </div>
      </div>
      <!-- Remember Me -->
      <div class="form-options">
        <label class="checkbox-container">
          <input type="checkbox" formControlName="rememberMe">
          <span class="checkmark"></span>
          Se souvenir de moi
        </label>
      </div>
      <button type="submit" [disabled]="isLoading">
        <span *ngIf="!isLoading">S'inscrire</span>
        <span *ngIf="isLoading" class="spinner">
          <i class="fa fa-spinner fa-spin"></i> Chargement...
        </span>
      </button>
    </form>

    <div *ngIf="errorMessage" class="error-message">
      {{ errorMessage }}
    </div>

    <div class="terms-notice">
      En vous inscrivant, vous acceptez nos <a href="#">Conditions d'utilisation</a> et notre <a href="#">Politique de confidentialité</a>.
    </div>

    <div class="auth-footer">
      Vous avez déjà un compte ? <a (click)="goToLogin()">Connectez-vous</a>
    </div>
  </div>
</div>
